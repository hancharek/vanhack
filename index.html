<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>VanHack's Event Page</title>
    <link
      rel="icon"
      href="https://www.vanhack.com/wp-content/uploads/2018/11/favicon.ico"
      type="image/x-icon"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.0.4/css/all.css"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js"
      integrity="sha512-quHCp3WbBNkwLfYUMd+KwBAgpVukJu5MncuQaWXgCrfgcxCJAq/fo+oqrRKOj+UKEmyMCG3tb8RB63W+EmrOBg=="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  </head>
  <body>
    <div id="app">
      <header>
        <div class="container">
          <div id="logo">
            <img
              src="https://vanhack.com/static-desktop/699de0b98e1d66b82a32905802aa6cbc.svg"
              alt="VanHack"
            />
          </div>
          <h1>Events</h1>
        </div>
      </header>
      <nav id="types">
        <div class="container">
          <ul>
            <li
              :class="{ active: filterByType === type.id ,premium: type.id == 5}"
              @click="filterByType = type.id"
              v-for="type in types"
            >
              {{type.name}}
            </li>
          </ul>
        </div>
      </nav>
      <section>
        <div class="container">
          <transition name="fade" mode="out-in">
            <div v-if="loading" class="loading" key="loading">
              <div>Loading....</div>
            </div>
            <div v-else-if="getEventsFiltered.length" key="events">
              <transition-group name="fade" tag="div" id="events-container">
                <article
                  v-for="event in getEventsFiltered"
                  class="card"
                  :class="{premium: !event.can_apply}"
                  :key="event.id"
                >
                  <keep-alive>
                    <picture>
                      <img :src="`${event.cover}?random=${event.id}`" alt="" />
                    </picture>
                  </keep-alive>
                  <div class="card-content">
                    <div class="event-type">
                      <i
                        class="fa"
                        :class="{'fa-tag': event.can_apply,'fa-star': !event.can_apply}"
                      ></i>
                      {{ event.type.name }}
                    </div>
                    <div
                      class="event-location"
                      :class="{online: event.is_online }"
                    >
                      <template v-if="event.is_online">
                        <i class="fa fa-globe"></i>
                        Online
                      </template>
                      <template v-else>
                        <i class="fa fa-map-marker-alt"></i>
                        {{ event.country }} - {{event.city}}
                      </template>
                    </div>
                    <div class="title">{{event.title}}</div>
                    <div class="resume">
                      {{event.content.length > 100 ?
                      (event.content.substring(0,100) + '...') : event.content
                      }}
                    </div>
                    <div class="footer">
                      <p class="event-date">
                        <i class="fa fa-calendar-check"></i>
                        {{event.start_date}}
                        <template v-if="event.start_date !== event.end_date"
                          >- {{event.end_date}}</template
                        >
                      </p>
                      <a
                        @click="showModalDetails = true;showingEvent = event"
                        class="btn btn-details"
                        :class="{'btn-blue': event.can_apply,'btn-orange': !event.can_apply}"
                        >See details</a
                      >
                    </div>
                  </div>
                </article>
              </transition-group>
            </div>
            <div v-else class="no-results" key="no-results">
              No events to show
            </div>
          </transition>
        </div>
      </section>
      <footer>
        <img
          id="logo"
          src="https://vanhack.com/static-desktop/699de0b98e1d66b82a32905802aa6cbc.svg"
          alt="VanHack"
        />
        <p>
          Â© 2020 VanHack <br /><br />
          This project was made for code verification on VanHack platform.
          <br />
          Git Repository:
          <a href="https://github.com/roble/vanhack">
            github.com/roble/vanhack
          </a>
        </p>
      </footer>
      <transition name="fade">
        <div
          v-if="showModalError || showModalDetails"
          class="modal-overlay"
        ></div>
      </transition>
      <transition name="fade">
        <div class="modal modal-error" v-if="showModalError">
          <div class="modal-titte"></div>
          <div class="modal-body">
            <h3>Ops!</h3>
            You need a premium account to apply to this webinar.
          </div>
          <div class="modal-footer">
            <a class="btn btn-red btn-close" @click="showModalError = false"
              >Close</a
            >
            <a
              href="https://vanhack.com/checkout"
              target="_blank"
              class="btn btn-orange btn-ok"
              >Join premium</a
            >
          </div>
        </div>
      </transition>
      <transition name="fade">
        <div class="modal modal-details" v-if="showModalDetails">
          <div class="modal-body">
            <div
              class="image-cover"
              :style="{'background-image': `url('${showingEvent.cover}')`}"
            >
              {{`${showingEvent.cover}?random=${showingEvent.id}`}}
            </div>
            <div class="event-title">{{ showingEvent.title }}</div>
            <div class="card-content">
              <div class="event-type">
                <i
                  class="fa"
                  :class="{'fa-tag': showingEvent.can_apply,'fa-star': !showingEvent.can_apply}"
                ></i>
                {{ showingEvent.type.name }}
              </div>
              <div
                class="event-location"
                :class="{online: showingEvent.is_online }"
              >
                <template v-if="showingEvent.is_online">
                  <i class="fa fa-globe"></i>
                  Online
                </template>
                <template v-else>
                  <i class="fa fa-map-marker-alt"></i>
                  {{ showingEvent.country }} - {{showingEvent.city}}
                </template>
              </div>
              <div class="title">{{showingEvent.title}}</div>
              <div class="resume">{{showingEvent.content.length }}</div>
              <div class="footer">
                <p class="event-date">
                  <i class="fa fa-calendar-check"></i>
                  {{showingEvent.start_date}}
                  <template
                    v-if="showingEvent.start_date !== showingEvent.end_date"
                    >- {{showingEvent.end_date}}</template
                  >
                </p>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <a class="btn btn-red btn-close" @click="showModalDetails = false"
              >Close</a
            >
            <a
              href="https://vanhack.com/checkout"
              target="_blank"
              class="btn btn-ok"
              :class="{'btn-orange': !showingEvent.can_apply,'btn-blue': showingEvent.can_apply}"
              >Apply now</a
            >
          </div>
        </div>
      </transition>
    </div>
    <script src="script.js"></script>
  </body>
</html>
